import{d as x,L as C,l as g,D as M,N as h,n as N,o as c,f as _,b as t,O as k,V as G,z as j,F as w,_ as B,Q as T,e as v,W as D,x as F,t as $,X as K,S as Z,Y as z,u as O,j as Y,R as I,g as E,a as f,K as L,h as U,Z as A,$ as H,a0 as W,a1 as X}from"./index-LOE-gbzf.js";import{u as S}from"./updateUrlQuery-BTnRic-4.js";import{f as J}from"./genresService-BTmxOYIo.js";const ee={class:"select-base"},te=x({__name:"TheFiltersSort",setup(u){const a=C(),s=g(""),e=M();return h(()=>s.value,l=>{S(a,{ordering:l,page:1})}),h(()=>e.query.ordering,l=>{l||(s.value="")}),N(()=>{e.query.ordering&&(s.value=e.query.ordering)}),(l,r)=>(c(),_(w,null,[r[3]||(r[3]=t("label",{class:"filters__name",for:"sortSelect"},"Sort by",-1)),t("div",ee,[k(t("select",{"onUpdate:modelValue":r[0]||(r[0]=i=>s.value=i),id:"sortSelect",name:"sort"},r[1]||(r[1]=[j('<option value="" disabled data-v-c9531586>Choice value</option><option value="-metacritic" data-v-c9531586>Metacritic</option><option value="-rating" data-v-c9531586>Rating</option><option value="name" data-v-c9531586>Name A-Z</option><option value="-name" data-v-c9531586>Name Z-A</option>',5)]),512),[[G,s.value]]),r[2]||(r[2]=t("div",{class:"select-arrow"},null,-1))])],64))}}),se=B(te,[["__scopeId","data-v-c9531586"]]),ae={class:"yearFilter"},le={class:"yearFilter__wrap"},re=["placeholder"],oe={class:"yearFilter__wrap"},ne=["placeholder"],b=1970,ie=x({__name:"TheFiltersByYears",setup(u){const a=M(),s=C(),e=new Date().getFullYear();let l=g(!1),r=g(!1),i=g(b),o=g(e);const d=p=>{const n=p.target;n.value=n.value.replace(/\D/g,""),Number(n.value)<b||Number(n.value)>e?r.value=!0:(r.value=!1,l.value=!0)},m=p=>{const n=p.target;(Number(n.value.length)<4||Number(n.value)<b||Number(n.value)>e)&&(i.value=b,n.value=String(b),r.value=!1)},y=p=>{const n=p.target;(Number(n.value.length)<4||Number(n.value)<b||Number(n.value)>e)&&(o.value=e,n.value=String(e),r.value=!1)};return h(()=>a.query.dates,()=>{a.query.dates===void 0&&(i.value=b,o.value=e)}),h(()=>l.value,p=>{p&&(S(s,{dates:`${i.value}-01-01,${o.value}-12-31`,page:1}),l.value=!1)}),N(()=>{if(a.query.dates){const p=a.query.dates.split(",").map(n=>new Date(n).getFullYear());i.value=p[0],o.value=p[1]}}),(p,n)=>(c(),_("div",ae,[t("div",le,[k(t("input",{onInput:d,onBlur:m,class:"yearFilter__num","onUpdate:modelValue":n[0]||(n[0]=V=>D(i)?i.value=V:i=V),type:"text",placeholder:String(b),maxlength:"4",name:"1",id:"1"},null,40,re),[[T,v(i)]]),t("span",{class:F(["yearFilter__tip",{"yearFilter__tip--active":v(r)}])},"Min "+$(b),2)]),t("div",oe,[k(t("input",{onInput:d,onBlur:y,"onUpdate:modelValue":n[1]||(n[1]=V=>D(o)?o.value=V:o=V),class:"yearFilter__num",placeholder:String(v(e)),maxlength:"4",type:"text",name:"2",id:"2"},null,40,ne),[[T,v(o)]]),t("span",{class:F(["yearFilter__tip",{"yearFilter__tip--active":v(r)}])},"Max "+$(v(e)),3)])]))}}),ue=B(ie,[["__scopeId","data-v-40c8dd1c"]]),de={class:"baseCheckbox"},ce={class:"baseCheckbox__wrap"},_e=["id","value","disabled"],pe=["for"],ve=x({__name:"BaseCheckbox",props:K({id:{},text:{},value:{},isDisabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const a=Z(u,"modelValue");return(s,e)=>(c(),_("div",de,[t("div",ce,[k(t("input",{class:"baseCheckbox__input",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l),id:s.id,value:s.value,disabled:s.isDisabled},null,8,_e),[[z,a.value]]),e[1]||(e[1]=t("div",{class:"baseCheckbox__icon"},null,-1))]),t("label",{class:"baseCheckbox__label",for:s.id},$(s.text),9,pe)]))}}),P=B(ve,[["__scopeId","data-v-fbe4515d"]]),me={class:"filters__name"},fe={key:0,class:"filters__loader"},ge=x({__name:"TheFiltersByGenres",setup(u){const a=M(),s=C(),e=g([]),l=g(!1),{data:r,isLoading:i}=O({queryKey:["getGenres"],queryFn:()=>J()});return h(()=>e.value,o=>{S(s,{genres:o.join(","),page:1})}),h(()=>a.query.genres,o=>{o||(e.value=[])}),N(()=>{a.query.genres&&(e.value=a.query.genres.split(","))}),(o,d)=>(c(),_(w,null,[t("p",me,[d[2]||(d[2]=Y(" Genres ")),k(t("span",null,"("+$(e.value.length)+")",513),[[I,e.value.length>0]])]),t("ul",{class:F(["filters__items",{"filters__items--expanded":l.value}])},[(c(!0),_(w,null,E(v(r),m=>(c(),_("li",{key:m.id},[f(P,{id:m.slug,text:m.name,value:m.id,modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=y=>e.value=y)},null,8,["id","text","value","modelValue"])]))),128)),v(i)?(c(),_("li",fe,[f(L)])):U("",!0)],2),t("button",{onClick:d[1]||(d[1]=m=>l.value=!l.value),class:"filters__toggle",type:"button"},$(l.value?"Hide":"Show more"),1)],64))}}),ye=u=>({count:u.count,results:u.results}),be="/platforms/lists/parents",he=async()=>{const u=await A.get(be);return ye(u.data)},xe={class:"filters__name"},$e={key:0,class:"filters__loader"},ke=x({__name:"TheFiltersByPlatforms",setup(u){const a=M(),s=C(),e=g([]),l=g(!1),{data:r,isLoading:i}=O({queryKey:["getPlatforms"],queryFn:()=>he()});return h(()=>e.value,o=>{S(s,{parent_platforms:o.join(","),page:1})}),h(()=>a.query.parent_platforms,o=>{o?e.value=a.query.parent_platforms.split(","):e.value=[]}),N(()=>{a.query.parent_platforms&&(e.value=a.query.parent_platforms.split(","))}),(o,d)=>{var m;return c(),_(w,null,[t("p",xe,[d[2]||(d[2]=Y(" Platforms ")),k(t("span",null,"("+$(e.value.length)+")",513),[[I,e.value.length>0]])]),t("ul",{class:F(["filters__items",{"filters__items--expanded":l.value}])},[(c(!0),_(w,null,E((m=v(r))==null?void 0:m.results,y=>(c(),_("li",{key:y.id},[f(P,{id:y.slug,text:y.name,value:y.id,modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=p=>e.value=p)},null,8,["id","text","value","modelValue"])]))),128)),v(i)?(c(),_("li",$e,[f(L)])):U("",!0)],2),t("button",{onClick:d[1]||(d[1]=y=>l.value=!l.value),class:"filters__toggle",type:"button"},$(l.value?"Hide":"Show more"),1)],64)}}}),Fe=()=>window.innerWidth>=1024,q=H({isOpen:!Fe()}),Ve=()=>{q.isOpen=!q.isOpen},R=window.matchMedia("(max-width: 1024px)"),Q=u=>{q.isOpen=u.matches};R.addEventListener("change",Q);Q(R);const we=x({__name:"BaseBurger",props:{state:{type:Boolean}},setup(u){const a=u,s=g(!1),e=()=>{s.value=!s.value};h(()=>a.state,i=>{i===!1&&(s.value=!1)});const l=window.matchMedia("(max-width: 1024px)"),r=i=>{s.value=!1};return l.addEventListener("change",r),r(),(i,o)=>(c(),_("button",{onClick:e,class:F(["burger",{"burger--active":s.value}])},o[0]||(o[0]=[t("span",null,null,-1),t("span",null,null,-1),t("span",null,null,-1)]),2))}}),Be=B(we,[["__scopeId","data-v-f615f606"]]),qe={class:"filtersToggle"},Ce=x({__name:"TheFiltersToggler",emits:["click"],setup(u){return(a,s)=>(c(),_("div",qe,[f(Be,{class:"closeFilters",onClick:s[0]||(s[0]=W(e=>a.$emit("click"),["stop"]))})]))}}),Me=B(Ce,[["__scopeId","data-v-a4206baf"]]),Ne={class:"filters__content"},Se={class:"filters__block"},Te={class:"filters__block"},De={class:"filters__block"},Oe={class:"filters__block"},Le=x({__name:"TheFilters",setup(u){const{toggleOverlay:a}=X();return(s,e)=>(c(),_("aside",{class:F(["filters",{"filters--active":v(q).isOpen===!1}])},[f(Me,{onClick:e[0]||(e[0]=l=>(v(Ve)(),v(a)())),class:"filters__close-btn"}),t("div",Ne,[t("div",Se,[f(se)]),t("div",Te,[e[1]||(e[1]=t("p",{class:"filters__name"},"Years",-1)),f(ue)]),t("div",De,[f(ke)]),t("div",Oe,[f(ge)])])],2))}});export{Le as default};
